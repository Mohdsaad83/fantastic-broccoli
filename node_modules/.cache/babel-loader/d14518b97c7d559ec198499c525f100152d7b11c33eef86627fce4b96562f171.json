{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{FiClock,FiUsers,FiHeart,FiArrowLeft,FiCheckCircle}from\"react-icons/fi\";import{useRecipes}from\"../hooks/useRecipes\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RecipeDetails=()=>{var _recipe$nutrition,_recipe$nutrition2;const{id}=useParams();const navigate=useNavigate();const{getRecipe,addToFavorites,removeFromFavorites,isFavorite:checkFavorite}=useRecipes();const[recipe,setRecipe]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isFavorite,setIsFavorite]=useState(false);const[servings,setServings]=useState(1);useEffect(()=>{const fetchRecipe=async()=>{try{setLoading(true);setError(null);const recipeData=await getRecipe(id);if(recipeData){setRecipe(recipeData);setServings(recipeData.servings);// Check if recipe is favorited\nconst favoriteStatus=await checkFavorite(recipeData._id||recipeData.id);setIsFavorite(favoriteStatus);}else{setError(\"Recipe not found\");}}catch(err){console.error(\"Error fetching recipe:\",err);setError(\"Failed to load recipe\");}finally{setLoading(false);}};if(id){fetchRecipe();}},[id,getRecipe,checkFavorite]);const handleFavoriteToggle=async()=>{try{const recipeId=recipe._id||recipe.id;if(isFavorite){const success=await removeFromFavorites(recipeId);if(success){setIsFavorite(false);}}else{const success=await addToFavorites(recipeId);if(success){setIsFavorite(true);}}}catch(err){console.error(\"Error toggling favorite:\",err);}};const handleServingsChange=newServings=>{if(newServings>0){setServings(newServings);}};const getAdjustedAmount=(originalAmount,originalServings)=>{const multiplier=servings/originalServings;// Handle both string format (\"2 cups\") and number format (2)\nif(typeof originalAmount===\"string\"){const match=originalAmount.match(/^(\\d+(?:\\.\\d+)?)\\s*(.*)$/);if(match){const amount=parseFloat(match[1]);const unit=match[2];const adjustedAmount=(amount*multiplier).toFixed(2).replace(/\\.?0+$/,\"\");return\"\".concat(adjustedAmount,\" \").concat(unit);}return originalAmount;}else if(typeof originalAmount===\"number\"){// Handle numeric amounts from backend\nconst adjustedAmount=(originalAmount*multiplier).toFixed(2).replace(/\\.?0+$/,\"\");return adjustedAmount;}// Fallback for any other type\nreturn originalAmount;};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading recipe...\"})]});}if(error||!recipe){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:error||\"Recipe not found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/recipes\"),className:\"btn btn-primary\",children:\"Back to Recipes\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"recipe-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-header\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/recipes\"),className:\"back-btn\",children:[/*#__PURE__*/_jsx(FiArrowLeft,{}),\" Back to Recipes\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-hero\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"recipe-image-large\",children:/*#__PURE__*/_jsx(\"span\",{className:\"recipe-emoji-large\",children:recipe.image})}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"recipe-badges\",children:recipe.tags&&recipe.tags.length>0&&recipe.tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"tag\",children:tag},tag))}),/*#__PURE__*/_jsx(\"h1\",{className:\"recipe-title\",children:recipe.title}),/*#__PURE__*/_jsx(\"p\",{className:\"recipe-description\",children:recipe.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meta-item\",children:[/*#__PURE__*/_jsx(FiClock,{}),/*#__PURE__*/_jsxs(\"span\",{children:[recipe.cookingTime,\" min\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta-item\",children:[/*#__PURE__*/_jsx(FiUsers,{}),/*#__PURE__*/_jsxs(\"span\",{children:[recipe.servings,\" servings\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"meta-item calories\",children:/*#__PURE__*/_jsxs(\"span\",{children:[((_recipe$nutrition=recipe.nutrition)===null||_recipe$nutrition===void 0?void 0:_recipe$nutrition.calories)||recipe.calories,\" cal\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"meta-item\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2B50 \",recipe.rating,\" \",recipe.reviews?\"(\".concat(recipe.reviews,\" reviews)\"):\"\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"recipe-actions\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleFavoriteToggle,className:\"btn btn-outline \".concat(isFavorite?\"favorited\":\"\"),children:[/*#__PURE__*/_jsx(FiHeart,{}),\" \",isFavorite?\"Favorited\":\"Add to Favorites\"]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Nutrition Facts\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-value\",children:Math.round((((_recipe$nutrition2=recipe.nutrition)===null||_recipe$nutrition2===void 0?void 0:_recipe$nutrition2.calories)||recipe.calories)*servings/recipe.servings)}),/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-label\",children:\"Calories\"})]}),recipe.nutrition&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"nutrition-value\",children:[Math.round(recipe.nutrition.protein*servings/recipe.servings),\"g\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-label\",children:\"Protein\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"nutrition-value\",children:[Math.round(recipe.nutrition.carbs*servings/recipe.servings),\"g\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-label\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"nutrition-value\",children:[Math.round(recipe.nutrition.fat*servings/recipe.servings),\"g\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-label\",children:\"Fat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"nutrition-value\",children:[Math.round(recipe.nutrition.fiber*servings/recipe.servings),\"g\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-label\",children:\"Fiber\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-item\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"nutrition-value\",children:[Math.round(recipe.nutrition.sodium*servings/recipe.servings),\"mg\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"nutrition-label\",children:\"Sodium\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-main\",children:[recipe.ingredients&&recipe.ingredients.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"ingredients-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ingredients\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"servings-adjuster\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Servings:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleServingsChange(servings-1),className:\"serving-btn\",children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"serving-count\",children:servings}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleServingsChange(servings+1),className:\"serving-btn\",children:\"+\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ingredients-list\",children:recipe.ingredients&&recipe.ingredients.length>0&&recipe.ingredients.map((ingredient,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"ingredient-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"ingredient-\".concat(index)}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"ingredient-\".concat(index),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"ingredient-amount\",children:[getAdjustedAmount(ingredient.amount,recipe.servings),ingredient.unit?\" \".concat(ingredient.unit):\"\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ingredient-name\",children:[ingredient.name,ingredient.notes?\" (\".concat(ingredient.notes,\")\"):\"\"]})]})]},index))})]}),recipe.instructions&&recipe.instructions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"instructions-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Instructions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"instructions-list\",children:recipe.instructions&&recipe.instructions.length>0&&recipe.instructions.map((instruction,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"instruction-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"instruction-number\",children:index+1}),/*#__PURE__*/_jsx(\"div\",{className:\"instruction-text\",children:typeof instruction===\"string\"?instruction:instruction.instruction})]},index))})]})]}),recipe.tips&&recipe.tips.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"tips-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Chef's Tips\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tips-list\",children:recipe.tips.map((tip,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(FiCheckCircle,{className:\"tip-icon\"}),/*#__PURE__*/_jsx(\"p\",{children:tip})]},index))})]})]})]})});};export default RecipeDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","FiClock","FiUsers","FiHeart","FiArrowLeft","FiCheckCircle","useRecipes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RecipeDetails","_recipe$nutrition","_recipe$nutrition2","id","navigate","getRecipe","addToFavorites","removeFromFavorites","isFavorite","checkFavorite","recipe","setRecipe","loading","setLoading","error","setError","setIsFavorite","servings","setServings","fetchRecipe","recipeData","favoriteStatus","_id","err","console","handleFavoriteToggle","recipeId","success","handleServingsChange","newServings","getAdjustedAmount","originalAmount","originalServings","multiplier","match","amount","parseFloat","unit","adjustedAmount","toFixed","replace","concat","className","children","onClick","image","tags","length","map","tag","title","description","cookingTime","nutrition","calories","rating","reviews","Math","round","protein","carbs","fat","fiber","sodium","ingredients","ingredient","index","type","htmlFor","name","notes","instructions","instruction","tips","tip"],"sources":["/Users/bosaad77/ga/porjects/fantastic-broccoli/src/pages/RecipeDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useParams, useNavigate } from \"react-router-dom\"\nimport {\n  FiClock,\n  FiUsers,\n  FiHeart,\n  FiArrowLeft,\n  FiCheckCircle,\n} from \"react-icons/fi\"\nimport { useRecipes } from \"../hooks/useRecipes\"\n\nconst RecipeDetails = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const {\n    getRecipe,\n    addToFavorites,\n    removeFromFavorites,\n    isFavorite: checkFavorite,\n  } = useRecipes()\n  const [recipe, setRecipe] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [isFavorite, setIsFavorite] = useState(false)\n  const [servings, setServings] = useState(1)\n\n  useEffect(() => {\n    const fetchRecipe = async () => {\n      try {\n        setLoading(true)\n        setError(null)\n        const recipeData = await getRecipe(id)\n\n        if (recipeData) {\n          setRecipe(recipeData)\n          setServings(recipeData.servings)\n\n          // Check if recipe is favorited\n          const favoriteStatus = await checkFavorite(recipeData._id || recipeData.id)\n          setIsFavorite(favoriteStatus)\n        } else {\n          setError(\"Recipe not found\")\n        }\n      } catch (err) {\n        console.error(\"Error fetching recipe:\", err)\n        setError(\"Failed to load recipe\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (id) {\n      fetchRecipe()\n    }\n  }, [id, getRecipe, checkFavorite])\n\n  const handleFavoriteToggle = async () => {\n    try {\n      const recipeId = recipe._id || recipe.id\n      if (isFavorite) {\n        const success = await removeFromFavorites(recipeId)\n        if (success) {\n          setIsFavorite(false)\n        }\n      } else {\n        const success = await addToFavorites(recipeId)\n        if (success) {\n          setIsFavorite(true)\n        }\n      }\n    } catch (err) {\n      console.error(\"Error toggling favorite:\", err)\n    }\n  }\n\n  const handleServingsChange = (newServings) => {\n    if (newServings > 0) {\n      setServings(newServings)\n    }\n  }\n\n  const getAdjustedAmount = (originalAmount, originalServings) => {\n    const multiplier = servings / originalServings\n\n    // Handle both string format (\"2 cups\") and number format (2)\n    if (typeof originalAmount === \"string\") {\n      const match = originalAmount.match(/^(\\d+(?:\\.\\d+)?)\\s*(.*)$/)\n\n      if (match) {\n        const amount = parseFloat(match[1])\n        const unit = match[2]\n        const adjustedAmount = (amount * multiplier)\n          .toFixed(2)\n          .replace(/\\.?0+$/, \"\")\n        return `${adjustedAmount} ${unit}`\n      }\n\n      return originalAmount\n    } else if (typeof originalAmount === \"number\") {\n      // Handle numeric amounts from backend\n      const adjustedAmount = (originalAmount * multiplier)\n        .toFixed(2)\n        .replace(/\\.?0+$/, \"\")\n      return adjustedAmount\n    }\n\n    // Fallback for any other type\n    return originalAmount\n  }\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <div className=\"spinner\"></div>\n        <p>Loading recipe...</p>\n      </div>\n    )\n  }\n\n  if (error || !recipe) {\n    return (\n      <div className=\"error-page\">\n        <h2>{error || \"Recipe not found\"}</h2>\n        <button\n          onClick={() => navigate(\"/recipes\")}\n          className=\"btn btn-primary\"\n        >\n          Back to Recipes\n        </button>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"recipe-details\">\n      <div className=\"container\">\n        {/* Header */}\n        <div className=\"recipe-header\">\n          <button onClick={() => navigate(\"/recipes\")} className=\"back-btn\">\n            <FiArrowLeft /> Back to Recipes\n          </button>\n\n          <div className=\"recipe-hero\">\n            <div className=\"recipe-image-large\">\n              <span className=\"recipe-emoji-large\">{recipe.image}</span>\n            </div>\n\n            <div className=\"recipe-info\">\n              <div className=\"recipe-badges\">\n                {recipe.tags &&\n                  recipe.tags.length > 0 &&\n                  recipe.tags.map((tag) => (\n                    <span key={tag} className=\"tag\">\n                      {tag}\n                    </span>\n                  ))}\n              </div>\n\n              <h1 className=\"recipe-title\">{recipe.title}</h1>\n              <p className=\"recipe-description\">{recipe.description}</p>\n\n              <div className=\"recipe-meta\">\n                <div className=\"meta-item\">\n                  <FiClock />\n                  <span>{recipe.cookingTime} min</span>\n                </div>\n                <div className=\"meta-item\">\n                  <FiUsers />\n                  <span>{recipe.servings} servings</span>\n                </div>\n                <div className=\"meta-item calories\">\n                  <span>\n                    {recipe.nutrition?.calories || recipe.calories} cal\n                  </span>\n                </div>\n                <div className=\"meta-item\">\n                  <span>\n                    ‚≠ê {recipe.rating}{\" \"}\n                    {recipe.reviews ? `(${recipe.reviews} reviews)` : \"\"}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"recipe-actions\">\n                <button\n                  onClick={handleFavoriteToggle}\n                  className={`btn btn-outline ${isFavorite ? \"favorited\" : \"\"}`}\n                >\n                  <FiHeart /> {isFavorite ? \"Favorited\" : \"Add to Favorites\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"recipe-content\">\n          {/* Nutrition Info */}\n          <div className=\"nutrition-card\">\n            <h3>Nutrition Facts</h3>\n            <div className=\"nutrition-grid\">\n              <div className=\"nutrition-item\">\n                <span className=\"nutrition-value\">\n                  {Math.round(\n                    ((recipe.nutrition?.calories || recipe.calories) *\n                      servings) /\n                      recipe.servings\n                  )}\n                </span>\n                <span className=\"nutrition-label\">Calories</span>\n              </div>\n              {recipe.nutrition && (\n                <>\n                  <div className=\"nutrition-item\">\n                    <span className=\"nutrition-value\">\n                      {Math.round(\n                        (recipe.nutrition.protein * servings) / recipe.servings\n                      )}\n                      g\n                    </span>\n                    <span className=\"nutrition-label\">Protein</span>\n                  </div>\n                  <div className=\"nutrition-item\">\n                    <span className=\"nutrition-value\">\n                      {Math.round(\n                        (recipe.nutrition.carbs * servings) / recipe.servings\n                      )}\n                      g\n                    </span>\n                    <span className=\"nutrition-label\">Carbs</span>\n                  </div>\n                  <div className=\"nutrition-item\">\n                    <span className=\"nutrition-value\">\n                      {Math.round(\n                        (recipe.nutrition.fat * servings) / recipe.servings\n                      )}\n                      g\n                    </span>\n                    <span className=\"nutrition-label\">Fat</span>\n                  </div>\n                  <div className=\"nutrition-item\">\n                    <span className=\"nutrition-value\">\n                      {Math.round(\n                        (recipe.nutrition.fiber * servings) / recipe.servings\n                      )}\n                      g\n                    </span>\n                    <span className=\"nutrition-label\">Fiber</span>\n                  </div>\n                  <div className=\"nutrition-item\">\n                    <span className=\"nutrition-value\">\n                      {Math.round(\n                        (recipe.nutrition.sodium * servings) / recipe.servings\n                      )}\n                      mg\n                    </span>\n                    <span className=\"nutrition-label\">Sodium</span>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n\n          <div className=\"recipe-main\">\n            {/* Ingredients */}\n            {recipe.ingredients && recipe.ingredients.length > 0 && (\n              <div className=\"ingredients-section\">\n                <div className=\"section-header\">\n                  <h3>Ingredients</h3>\n                  <div className=\"servings-adjuster\">\n                    <span>Servings:</span>\n                    <button\n                      onClick={() => handleServingsChange(servings - 1)}\n                      className=\"serving-btn\"\n                    >\n                      -\n                    </button>\n                    <span className=\"serving-count\">{servings}</span>\n                    <button\n                      onClick={() => handleServingsChange(servings + 1)}\n                      className=\"serving-btn\"\n                    >\n                      +\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"ingredients-list\">\n                  {recipe.ingredients &&\n                    recipe.ingredients.length > 0 &&\n                    recipe.ingredients.map((ingredient, index) => (\n                      <div key={index} className=\"ingredient-item\">\n                        <input type=\"checkbox\" id={`ingredient-${index}`} />\n                        <label htmlFor={`ingredient-${index}`}>\n                          <span className=\"ingredient-amount\">\n                            {getAdjustedAmount(\n                              ingredient.amount,\n                              recipe.servings\n                            )}\n                            {ingredient.unit ? ` ${ingredient.unit}` : \"\"}\n                          </span>\n                          <span className=\"ingredient-name\">\n                            {ingredient.name}\n                            {ingredient.notes ? ` (${ingredient.notes})` : \"\"}\n                          </span>\n                        </label>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            )}\n\n            {/* Instructions */}\n            {recipe.instructions && recipe.instructions.length > 0 && (\n              <div className=\"instructions-section\">\n                <h3>Instructions</h3>\n                <div className=\"instructions-list\">\n                  {recipe.instructions &&\n                    recipe.instructions.length > 0 &&\n                    recipe.instructions.map((instruction, index) => (\n                      <div key={index} className=\"instruction-item\">\n                        <div className=\"instruction-number\">{index + 1}</div>\n                        <div className=\"instruction-text\">\n                          {typeof instruction === \"string\"\n                            ? instruction\n                            : instruction.instruction}\n                        </div>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Tips */}\n          {recipe.tips && recipe.tips.length > 0 && (\n            <div className=\"tips-section\">\n              <h3>Chef's Tips</h3>\n              <div className=\"tips-list\">\n                {recipe.tips.map((tip, index) => (\n                  <div key={index} className=\"tip-item\">\n                    <FiCheckCircle className=\"tip-icon\" />\n                    <p>{tip}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default RecipeDetails\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}